<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Xfinity Tools</title>
    <script src="../../JS/JavaS1.js"></script>
    <script src="DropDownMenu.js"></script>
    <link href="../../Css/Bootstrap.css" rel="stylesheet" />
    <link href="../../Css/Header.css" rel="stylesheet" />
    <link href="../../Css/Dashboard.css" rel="stylesheet" />
</head>
<body>

    <!-- Larger div with class 'Row' -->
    <div class="row" id="toolsRow">
        <!-- Dynamic tool sections will be injected here -->
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyD32FmQ4e70kW-qjYM7SGmC-Gre4jF8NJE",
            authDomain: "xfinitytools-database.firebaseapp.com",
            projectId: "xfinitytools-database",
            storageBucket: "xfinitytools-database.appspot.com",
            messagingSenderId: "508662234595",
            appId: "1:508662234595:web:a34a9d38ab6a99afa574d6"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        const toolsRow = document.getElementById("toolsRow");
        toolsRow.innerHTML = ""; // Clear any placeholder or previous content

        db.collection("Tools").get().then((querySnapshot) => {
            if (querySnapshot.empty) {
                toolsRow.innerHTML = "<p>No tools found.</p>";
            } else {
                querySnapshot.forEach((doc) => {
                    const data = doc.data();

                    const toolSection = document.createElement("section");
                    toolSection.className = "col-md-4 card-dash";
                    toolSection.id = data["Tool-ID"] || ""; // Optional unique ID

                    // Creating inner HTML for each tool
                    toolSection.innerHTML = `
                            <div>
                                <img src="../../Images/Untitled design.png" alt="XfinityLogo" width="20">
                            </div>
                            <h2>${data["Tool-Name"]}</h2>
                            <p class="Tool-Description">${data["Tool-Description"]}</p>
                            <br />
                            <p class="Tool-URL">
                                <a class="btn btn-default" href="${data.URL}">Use &raquo;</a>
                            </p>
                        `;

                    // Append the new section to the toolsRow
                    toolsRow.appendChild(toolSection);
                });
            }
        }).catch((error) => {
            console.error("Error fetching documents: ", error);
            toolsRow.innerHTML = "<p>Error loading tools. Please try again later.</p>";
        });

    </script>
</body>
</html>
